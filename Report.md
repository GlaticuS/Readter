# Пользовательская документация к проекту "ReadteR"
## Автор: Гладких Анна
### МФТИ(ГУ), ФНБИК, 4103гр, 2016г

## Содержание:
1.Вступление
  + Цель документации
  + Twitter
  + Цепи Маркова
  + Особенности алгоритма
  
2. Техническое задание
  + Постановка задачи
  
3. Реализация
  + C Sharp
  + Visual Studio
  + Windows Forms
  + Среда тестирования Visual Studio
  + Документация
  + Tweetinvi
  + Реализация алгоритма
  
4. Как работать с программой
  + Пример сеанса работы
  
5. Заключение
  + Улучшения
  + Список литературы

### Вступление
Цель данной документациии -  показать пользователю возможности проекта, объяснить некоторые технические детали реализации 
и познакомить конечного пользователя с отчётом о проделанной работе и планами будущей разработки.

Twitter - платформа для публикации коротких сообщений (длиной до 140 символов), с целью обмена короткими новостями между пользователями.
Популярна во всём мире и предоставляет огромный массив данных в виде этих сообщений, которыми часто пользуются для статистических исследований
и экспериментов. 

Цепи Маркова -  последовательность случайных событий с конечным или счётным числом исходов, характеризующаяся тем свойством, что, говоря нестрого,
при фиксированном настоящем будущее независимо от прошлого. То есть, к примеру, при генерации текста, следующее слово будет зависеть только от нынешнего.
Область значений случайных величин называется пространством состояний.
Матрица переходных вероятностей (Transition Probability Matrix) - заданная заранее матрица, определяющая вероятность объекта перейти из состояния A в A'.
Также задается матрица начального распределения вероятностей (Initial State Distribution Matrix) - точнее, вектор начального распределения вероятностей - показывает, с какой
вероятностью объект находится в состоянии A1, A2, A3...
Для графических иллюстраций цепей Маркова используются диаграммы перехода (Transition Diagram). Они очень наглядны и описывают матрицу переходных вероятностей.
Пусть вектор начального распределения S0 = [0.2, 0.8], а матрица переходных вероятностей - P = [[0.9, 0.1], [0.7, 0.3]], у объекта может быть состояния A и A'. Поробуем установить, каким будет распределение вероятностей на следующем шаге, S1.
Для этого мы можем соорудить дерево вероятностей переходов из A в A' и отдельно посчитать, какова на следующем шаге будет вероятность того, что объект будет находиться в
состоянии A или A' - это и показывает вектор S1[P(A), P(A')]. Найдём его компоненты.
P(A) = 0.2*0.9 + 0.8*0.7 = 0.74;
Значит, P(A') = 1 - 0.74 = 0.26.
То есть в следующий момент времени вектор вероятности будет выглядеть так: S1 = [0.76, 0.24].
Но данную величину можно было посчитать другим способом, а именно, перемножив вектор начального распределения на матрицу переходных вероятностей (S0*P). Можно проверить и получить
такой же ответ. 
Таким образом, дальнейшие вектора вероятности можно узнать аналогичным способом: S2 = S1*P, S3 = S2*P и т.д.

Если все элементы матрицы P ненулевые, то такая цепь Маркова называется регулярной. Для регулярных Марковских цепей справедливо следующее утверждение.
Продолжим вычислять вектора вероятности для последующих моментов времени и начиная с некоторого номера мы заметим, что значения в векторах всё меньше и меньше отличаются от предыдущих,
приближаясь к некоему пределу. Этот предел называется стационарной матрицей (Stationary Matrix) Для стационарной матрицы справедливо равенство: S*P = S.

Цепи Маркова широко применяются в лингвистике и текстологии, в частности, при генерации текста, но чаще используются модификации - цепи Маркова первого-, второго- и других порядков, в которых будущее слово зависит от одного-двух-и так далее предыдущих слов, что позволяет создавать более осмысленные тексты. Вероятность появления слова определяется также частотой его появления в исходном тексте, то есть, если определенное сочетание слов встречалось в исходном тексте часто, то велика вероятность, что в сгенерированном будет именно это сочетание слов (в моём случае настоящего + будущего, в более сложных версиях появляется зависимость и от предыдущих слов).
Цепи Маркова можно использовать также при прогнозе погоды, оценке будущих продаж, предсказании результатов серии экспериментов, в общем, при моделировании крупных явлений.
Таким образом, появилась идея на основе библиотеки для API Твиттера и цепей Маркова создать приложение, позволяющее генерировать случайным образом новые твиты на основе информации, появляющейся в ленте пользователя. То есть, содержание твита в целом зависит от того, на какие профили пользователь подписан. С этой целью в стандартную реализацию алгоритма цепей Маркова были внесены изменения, касающиеся обработки входных и выходных данных - удаление лишних символов, ограничение текста до 140 символов.
В некотором роде приложение позволяет дать шуточную "оценку" личности пользователя и его предпочтений, т.к. генерируемый контент зависит от исходных данных, которые предоставляет лента пользователя.

### Техническое задание
Необходимо было разработать приложение, выполняющее следующие функции:
* Вход в систему со своего аккаунта Twitter;
* Просмотр ленты новых твитов без включения лишних элементов интерфейса веб-сайта посередине
* Отправка твитов прямиком из приложения
* Просмотр своего профиля: своей ленты твитов
* Генерация твита на основе последних 40 сообщений из новостной ленты.
* Отправка сгенерированного твита непосредственно через приложение.
* Автоматическое обновление ленты

### Реализация
Языком программирования, использованном в написании приложения, был выбран C#.
- Объектно-ориентированный язык;
- Относится к классу компилируемых ЯП;
- Был создан как язык разработки для платформы Microsoft .NET Framework, однако, сейчас применяется для широкого спектра задач.
- Имеет C-подобный синтаксис, предшественниками являются языки C и C++, ближайшим "родственником" - Java, но нельзя утверждать, что C# произошёл от Java, они скорее
разные представители одного направления. 
- Выбор данного языка связан с личными предпочтениями и интересом поработать со средой разработки Visual Studio, которая предоставляет большое количество инструментов для
разработки приложений.

Среда разработки Visual Studio - продукт компании Microsoft.
- Позволяет разрабатывать как консольные, так и приложения с интерфейсом, а так же веб-приложения, веб-сайты и веб-службы для всех платформ, поддерживаемых Windows, 
Windows Phone и т.д
- Использовалась Visual Studio 2015;
Инструменты, которые помогли в разработке приложения - среда для разработки интерфейса, использующая технологию Windows Forms, средства для тестирования приложения, редактор исходного кода.
Среда для разработки интерфейса имеет интуитивно понятную структуру, позволяющую быстро редактировать/создавать формы для окон приложения.
Тестирование приложения можно проводить по отдельным тестам или по всем сразу, после тестов доступны материалы тестирования, где отображаются результаты тестирования.
Для создания html-документации использовались теги XML - разметки, по которым был сгенерирован XML-документ, преобразованный с помощью генератора документации Sandcastle, который тоже был ранее продуктом Microsoft.

Основой приложения является Tweetinvi - свободно распространяющаяся библиотека для API Твиттера, с помощью которой можно создавать свои Твиттер-клиенты, проводить различные исследования контента(используя streams), или реализовывать свои идеи, использующие API Твиттера. Разработкой библиотеки занимается один человек, на данный момент она поддерживается и является
одной из самых распространённых библиотек для Twitter API. Имеет доступную документацию, где показаны все аспекты работы с библиотекой, множество примеров, вследствии чего освоить библиотеку можно довольно быстро, то есть понять, как её применить для своих нужд.

Другой важной частью приложения является генератор твитов.
Алгоритм Марковских цепей был реализован при помощи различных структур данных языка C# - списки, хеш-таблицы, структуры.
Приведу описание работы генератора (вместе с алгоритмом) поэтапно: 
1. Удалить из входного массива текста лишние символы - перенос строки/каретки, лишние пробелы, символы табуляции, не-ascii символы и ссылки.
2. Строка разбивается по пробелам на слова.
3. Заполняем структуру слов, рассматривая каждое из нового массива и проверяя хеш-таблицу слов, существует ли такое (ключ - слово, значение - количество встретившихся раз).
Если слова нет в хеш таблице, добавляем его туда. Также проверяем слово после данного, чтобы заполнить структуру дочерних слов, ведь в дальнейшем сгенерированный текст будет
зависеть от этих отношений между словами.
4. После заполнения структур, начинаем собирать новый текст. На него стоит ряд ограничений: длина не более 140 символов, нижний регистр всей строки, кроме первого символа.
5. Выбираем случайным образом стартовое слово.
6. Затем, рассматриваем его потомков, выбирая на место следующего случайным образом слово с большей частотой появления в исходном тексте.
7. Таким образом генерируем текст и отправляем его на выход.

### Пример сеанса работы с программой
- Запустить программу
- При появлении окна логина, в браузере по умолчанию откроется окно твиттера, где будет запрос приложения на использование данных пользователя. Чтобы получить пин-код,
нужно разрешить приложению читать ленту твитов, отправлять твиты, видеть профиль пользователя и т.д.
- Скопировать пин-код и вставить его в поле "PIN" окна логина, затем войти в систему.
- После загрузки контента, откроется окно с лентой пользователя, новостями пользователя и областью для генерации твитов. Теперь можно полноценно пользоваться приложением.
- При нажатии на кнопку "Сгенерировать" в области для генерации появляется текст, составленный случайным образом.
- Чтобы запостить этот текст у себя в профиле, можно нажать "Отправить"
- По завершению работы с приложением, нажать крестик в правом углу, чтобы выйти из приложения.

### Заключение
#### Улучшения
Хотелось бы изменить использованный вариант алгоритма Марковских цепей на Марковские цепи 1-го или 2-го порядка, что позволит улучшить смысловое качество сообщений.
Возможны некоторые изменения интерфейса, чтобы сделать его более удобным для пользователя. 

#### Список литературы
